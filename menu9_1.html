<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-python.min.js"></script> 
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.min.css" rel="stylesheet" />    


<code id="source-code" class="language-python">
#################  ê´‘ê³ ë¬¸êµ¬ ìë™ ìƒì„±í•˜ê¸° ###################

import streamlit as st
import openai


def askGpt(prompt,apikey):
    client = openai.OpenAI(api_key = apikey)
    response = client.chat.completions.create(
                        model="gpt-3.5-turbo",
                        messages=[{"role": "user", "content": prompt}])
    gptResponse = response.choices[0].message.content
    return gptResponse


def main():
    st.set_page_config(page_title="ê´‘ê³  ë¬¸êµ¬ ìƒì„± í”„ë¡œê·¸ë¨")
    # session state ì´ˆê¸°í™”
    if "OPENAI_API" not in st.session_state:
        st.session_state["OPENAI_API"] = ""

    # ì‚¬ì´ë“œë°”
    with st.sidebar:
        # Open AI API í‚¤ ì…ë ¥ë°›ê¸°
        open_apikey = st.text_input(label='OPENAI API í‚¤', placeholder='Enter Your API Key', value='',type='password')
        
        if open_apikey:
            st.session_state["OPENAI_API"] = open_apikey 
        st.markdown('---')

    #ë©”ì¸ê³µê°„
    st.header("ğŸ¸ê´‘ê³  ë¬¸êµ¬ ìƒì„± í”„ë¡œê·¸ë¨")
    st.markdown('---')

    col1, col2 =  st.columns(2)
    with col1:
        name = st.text_input("ì œí’ˆëª…",placeholder=" ")
        strenghth = st.text_input("ì œí’ˆ íŠ¹ì§•",placeholder=" ")
        keyword = st.text_input("í•„ìˆ˜ í¬í•¨ í‚¤ì›Œë“œ",placeholder=" ")
    with col2:  
        com_name = st.text_input("ë¸Œëœë“œ ëª…",placeholder="Apple, ì˜¬ë¦¬ë¸Œì˜..")
        tone_manner = st.text_input("í†¤ì—” ë©”ë„ˆ",placeholder="ë°œë„í•˜ê²Œ, ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê²Œ, ê°ì„±ì ìœ¼ë¡œ..")
        value = st.text_input("ë¸Œëœë“œ í•µì‹¬ ê°€ì¹˜",placeholder="í•„ìš” ì‹œ ì…ë ¥")

    if st.button("ê´‘ê³  ë¬¸êµ¬ ìƒì„±"):
        prompt = f'''
        ì•„ë˜ ë‚´ìš©ì„ ì°¸ê³ í•´ì„œ 1~2ì¤„ì§œë¦¬ ê´‘êµ¬ë¬¸êµ¬ 5ê°œ ì‘ì„±í•´ì¤˜
        - ì œí’ˆëª…: {name}
        - ë¸Œë Œë“œ ëª…: {com_name}
        - ë¸Œë Œë“œ í•µì‹¬ ê°€ì¹˜: {value}
        - ì œí’ˆ íŠ¹ì§•: {strenghth}
        - í†¤ì—” ë§¤ë„ˆ: {tone_manner}
        - í•„ìˆ˜ í¬í•¨ í‚¤ì›Œë“œ: {keyword}
        '''
        st.info(askGpt(prompt,st.session_state["OPENAI_API"]))

if __name__=='__main__':
    main()



# ì˜ˆì‹œ
# ì œí’ˆëª…: "í´ë¦¬ì–´ë·° ìŠ¤ë§ˆíŠ¸ ì•ˆê²½"
# ë¸Œëœë“œëª…: "ì˜µí‹°í…Œí¬"
# ì œí’ˆ íŠ¹ì§•: "ê³ í•´ìƒë„ ì¦ê°• í˜„ì‹¤ ë””ìŠ¤í”Œë ˆì´, 24ì‹œê°„ ë°°í„°ë¦¬ ìˆ˜ëª…, ê°€ë²¼ìš´ ë””ìì¸"
# í†¤ì•¤ë§¤ë„ˆ: ì˜ê°ì„ ì£¼ê³  ë¯¸ë˜ì§€í–¥ì 
# í•„ìˆ˜ í¬í•¨ í‚¤ì›Œë“œ: "ì¦ê°• í˜„ì‹¤, ì¼ìƒì ì¸ í¸ì•ˆí•¨, ì²¨ë‹¨ ê¸°ìˆ "
# ë¸Œëœë“œ í•µì‹¬ ê°€ì¹˜: "í˜ì‹ , ëª…í™•ì„±, ì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„"    
</code>